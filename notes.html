<div class="card" style="max-width:700px;margin:0 auto 30px auto;">
  <h2 style="text-align:center;">Beleške</h2>

  <label>Predmet:</label>
  <select id="noteSubject">
    <option>Istorija umetnosti 1</option>
    <option>Istorija umetnosti 2</option>
    <option>Osnovi poslovanja</option>
    <option>CRM</option>
    <option>HMIP</option>
    <option>Grafički dizajn</option>
    <option>Web dizajn i web upotrebljivost</option>
  </select>

  <label>Naziv beleške:</label>
  <input type="text" id="noteTitle">

  <label>Sadržaj beleške:</label>
  <textarea id="noteText" rows="4"></textarea>

  <button id="addNote">Dodaj belešku</button>
</div>

<h3 style="text-align:center;">Lista beleški po predmetima</h3>
<div id="notesList"></div>

<script>
$(document).ready(function () {
  let savedNotes = JSON.parse(localStorage.getItem("notes")) || {};

  function renderNotes() {
    $("#notesList").empty();

    for (let subj in savedNotes) {
      let container = $(`
        <div class="subject-container">
          <h4>${subj}</h4>
          <div class="subject-notes"></div>
        </div>
      `);

      savedNotes[subj].forEach(note => {
        let card = $(`
          <div class="note-card">
            <h4>${note.title}</h4>
            <p>${note.text}</p>
            <button class="delete-btn">Obriši</button>
          </div>
        `);
        container.find(".subject-notes").append(card);
      });

      $("#notesList").append(container);
    }

    localStorage.setItem(
      "notesCount",
      Object.values(savedNotes).reduce((a,b)=>a+b.length,0)
    );
  }

  renderNotes();

  $("#addNote").on("click", function () {
    let title = $("#noteTitle").val().trim();
    let text = $("#noteText").val().trim();
    let subject = $("#noteSubject").val();

    if (!title || !text) {
      alert("Popunite sva polja");
      return;
    }

    savedNotes[subject] = savedNotes[subject] || [];
    savedNotes[subject].push({ title, text });

    localStorage.setItem("notes", JSON.stringify(savedNotes));

    $("#noteTitle").val("");
    $("#noteText").val("");

    renderNotes();
  });

  $("#notesList").on("click", ".delete-btn", function () {
    let subject = $(this).closest(".subject-container").find("h4").first().text();
    let title = $(this).siblings("h4").text();

    savedNotes[subject] = savedNotes[subject].filter(n => n.title !== title);
    if (savedNotes[subject].length === 0) delete savedNotes[subject];

    localStorage.setItem("notes", JSON.stringify(savedNotes));
    renderNotes();
  });
});
</script>

<style>
  .card {
    background: var(--card);
    color: var(--text);
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  }

  select, input, textarea {
    width: 100%;
    padding: 8px;
    margin: 6px 0 14px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    background: var(--card);
    color: var(--text);
  }

  button {
    background: var(--accent);
    color: white;
    border: none;
    padding: 8px 14px;
    border-radius: 8px;
    cursor: pointer;
  }

  .subject-container {
    margin: 30px auto;
    max-width: 1000px;
  }

  .subject-container h4 {
    text-align: center;
    margin-bottom: 10px;
  }

  .subject-notes {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
  }

  .note-card {
    background: var(--card);
    color: var(--text);
    padding: 18px;
    width: 220px;
    border-radius: 14px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
  }

  .note-card p {
    font-size: 14px;
    line-height: 1.5;
  }

  .delete-btn {
    margin-top: 10px;
    background: #e74c3c;
  }
</style>
